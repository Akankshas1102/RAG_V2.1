<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Failover Solutions - Viewscape 11.37.1 Manual</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Introduction.html"><strong aria-hidden="true">1.</strong> Viewscape Systems</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Integrations</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Integrations/Active Directory.html"><strong aria-hidden="true">2.1.</strong> Active Directory</a></li><li class="chapter-item expanded "><a href="../Integrations/Adpro.html"><strong aria-hidden="true">2.2.</strong> Adpro</a></li><li class="chapter-item expanded "><a href="../Integrations/AMAG.html"><strong aria-hidden="true">2.3.</strong> AMAG</a></li><li class="chapter-item expanded "><a href="../Integrations/Assa Abloy.html"><strong aria-hidden="true">2.4.</strong> Assa Abloy</a></li><li class="chapter-item expanded "><a href="../Integrations/Avigilon.html"><strong aria-hidden="true">2.5.</strong> Avigilon</a></li><li class="chapter-item expanded "><a href="../Integrations/Axis Camera Station.html"><strong aria-hidden="true">2.6.</strong> Axis Camera Station</a></li><li class="chapter-item expanded "><a href="../Integrations/AXIS IO.html"><strong aria-hidden="true">2.7.</strong> AXIS IO</a></li><li class="chapter-item expanded "><a href="../Integrations/Axis Virtual Camera.html"><strong aria-hidden="true">2.8.</strong> Axis Virtual Camera</a></li><li class="chapter-item expanded "><a href="../Integrations/Bosch Analytics Motion.html"><strong aria-hidden="true">2.9.</strong> Bosch Analytics Motion</a></li><li class="chapter-item expanded "><a href="../Integrations/BVMS.html"><strong aria-hidden="true">2.10.</strong> Bosch BVMS</a></li><li class="chapter-item expanded "><a href="../Integrations/Coldstore Footage Nuke.html"><strong aria-hidden="true">2.11.</strong> Coldstore Footage Nuke</a></li><li class="chapter-item expanded "><a href="../Integrations/Coldstore NVR.html"><strong aria-hidden="true">2.12.</strong> Coldstore NVR</a></li><li class="chapter-item expanded "><a href="../Integrations/Commend.html"><strong aria-hidden="true">2.13.</strong> Commend</a></li><li class="chapter-item expanded "><a href="../Integrations/Conxtd.html"><strong aria-hidden="true">2.14.</strong> Conxtd</a></li><li class="chapter-item expanded "><a href="../Integrations/CSL Dualcom.html"><strong aria-hidden="true">2.15.</strong> CSL Dualcom</a></li><li class="chapter-item expanded "><a href="../Integrations/Daktronics ANPR.html"><strong aria-hidden="true">2.16.</strong> Daktronics ANPR</a></li><li class="chapter-item expanded "><a href="../Integrations/Daktronics.html"><strong aria-hidden="true">2.17.</strong> Daktronics</a></li><li class="chapter-item expanded "><a href="../Integrations/Dedicated Micros Alarms.html"><strong aria-hidden="true">2.18.</strong> Dedicated Micros Alarms</a></li><li class="chapter-item expanded "><a href="../Integrations/Dedicated Micros V9.html"><strong aria-hidden="true">2.19.</strong> Dedicated Micros V9</a></li><li class="chapter-item expanded "><a href="../Integrations/Entrotec User.html"><strong aria-hidden="true">2.20.</strong> Entrotec User</a></li><li class="chapter-item expanded "><a href="../Integrations/Entrotec.html"><strong aria-hidden="true">2.21.</strong> Entrotec</a></li><li class="chapter-item expanded "><a href="../Integrations/EverRun Requirements.html"><strong aria-hidden="true">2.22.</strong> EverRun Requirements</a></li><li class="chapter-item expanded "><a href="../Integrations/EverRun.html"><strong aria-hidden="true">2.23.</strong> EverRun</a></li><li class="chapter-item expanded "><a href="../Integrations/Failover Solutions.html" class="active"><strong aria-hidden="true">2.24.</strong> Failover Solutions</a></li><li class="chapter-item expanded "><a href="../Integrations/GDPR Manual.html"><strong aria-hidden="true">2.25.</strong> GDPR Manual</a></li><li class="chapter-item expanded "><a href="../Integrations/Guard Tour.html"><strong aria-hidden="true">2.26.</strong> Guard Tour</a></li><li class="chapter-item expanded "><a href="../Integrations/Hanwha.html"><strong aria-hidden="true">2.27.</strong> Hanwha</a></li><li class="chapter-item expanded "><a href="../Integrations/Heitel.html"><strong aria-hidden="true">2.28.</strong> Heitel</a></li><li class="chapter-item expanded "><a href="../Integrations/Hikvision Audio.html"><strong aria-hidden="true">2.29.</strong> Hikvision Audio</a></li><li class="chapter-item expanded "><a href="../Integrations/Honeywell Morley.html"><strong aria-hidden="true">2.30.</strong> Honeywell Morley</a></li><li class="chapter-item expanded "><a href="../Integrations/Integrations.html"><strong aria-hidden="true">2.31.</strong> Integrations</a></li><li class="chapter-item expanded "><a href="../Integrations/Milestone.html"><strong aria-hidden="true">2.32.</strong> Milestone</a></li><li class="chapter-item expanded "><a href="../Integrations/North BT.html"><strong aria-hidden="true">2.33.</strong> North BT</a></li><li class="chapter-item expanded "><a href="../Integrations/nx-witness.html"><strong aria-hidden="true">2.34.</strong> NX Witness</a></li><li class="chapter-item expanded "><a href="../Integrations/Panasonic.html"><strong aria-hidden="true">2.35.</strong> Panasonic</a></li><li class="chapter-item expanded "><a href="../Integrations/Paxton V9 Migration.html"><strong aria-hidden="true">2.36.</strong> Paxton V9 Migration</a></li><li class="chapter-item expanded "><a href="../Integrations/Pelco Endura.html"><strong aria-hidden="true">2.37.</strong> Pelco Endura</a></li><li class="chapter-item expanded "><a href="../Integrations/RTSP.html"><strong aria-hidden="true">2.38.</strong> RTSP</a></li><li class="chapter-item expanded "><a href="../Integrations/Samsung RTSP.html"><strong aria-hidden="true">2.39.</strong> Samsung RTSP</a></li><li class="chapter-item expanded "><a href="../Integrations/Scantronics.html"><strong aria-hidden="true">2.40.</strong> Scantronics</a></li><li class="chapter-item expanded "><a href="../Integrations/SIP.html"><strong aria-hidden="true">2.41.</strong> SIP</a></li><li class="chapter-item expanded "><a href="../Integrations/SNMP.html"><strong aria-hidden="true">2.42.</strong> SNMP</a></li><li class="chapter-item expanded "><a href="../Integrations/Stentofon Audio NVR.html"><strong aria-hidden="true">2.43.</strong> Stentofon Audio NVR</a></li><li class="chapter-item expanded "><a href="../Integrations/Stentofon.html"><strong aria-hidden="true">2.44.</strong> Stentofon</a></li><li class="chapter-item expanded "><a href="../Integrations/TDS.html"><strong aria-hidden="true">2.45.</strong> TDS</a></li><li class="chapter-item expanded "><a href="../Integrations/TDSi.html"><strong aria-hidden="true">2.46.</strong> TDSi</a></li><li class="chapter-item expanded "><a href="../Integrations/Texecom.html"><strong aria-hidden="true">2.47.</strong> Texecom</a></li><li class="chapter-item expanded "><a href="../Integrations/UNV.html"><strong aria-hidden="true">2.48.</strong> UNV</a></li><li class="chapter-item expanded "><a href="../Integrations/Vehant ITMS.html"><strong aria-hidden="true">2.49.</strong> Vehant ITMS</a></li><li class="chapter-item expanded "><a href="../Integrations/Vemotion.html"><strong aria-hidden="true">2.50.</strong> Vemotion</a></li><li class="chapter-item expanded "><a href="../Integrations/Videonetics.html"><strong aria-hidden="true">2.51.</strong> Videonetics</a></li><li class="chapter-item expanded "><a href="../Integrations/ViewCast.html"><strong aria-hidden="true">2.52.</strong> ViewCast</a></li><li class="chapter-item expanded "><a href="../Integrations/Viewscape Keyboard.html"><strong aria-hidden="true">2.53.</strong> Viewscape Keyboard</a></li><li class="chapter-item expanded "><a href="../Integrations/Viewscape Motion Dection.html"><strong aria-hidden="true">2.54.</strong> Viewscape Motion Dection</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Viewscape Systems</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Viewscape Systems/Desktop.html"><strong aria-hidden="true">3.1.</strong> Desktop</a></li><li class="chapter-item expanded "><a href="../Viewscape Systems/Export Manager.html"><strong aria-hidden="true">3.2.</strong> Export Manager</a></li><li class="chapter-item expanded "><a href="../Viewscape Systems/Pro Controls.html"><strong aria-hidden="true">3.3.</strong> Pro Controls</a></li><li class="chapter-item expanded "><a href="../Viewscape Systems/Pro Server.html"><strong aria-hidden="true">3.4.</strong> Pro Server</a></li><li class="chapter-item expanded "><a href="../Viewscape Systems/Surface.html"><strong aria-hidden="true">3.5.</strong> Surface</a></li><li class="chapter-item expanded "><a href="../Viewscape Systems/Viewscape Systems.html"><strong aria-hidden="true">3.6.</strong> Viewscape Systems</a></li><li class="chapter-item expanded "><a href="../Viewscape Systems/Viewscape-Systems.html"><strong aria-hidden="true">3.7.</strong> Viewscape-Systems</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Viewscape 11.37.1 Manual</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="failover"><a class="header" href="#failover">Failover</a></h1>
<h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="#introduction">1 Introduction</a></li>
<li><a href="#manual-failover">2 Manual Failover</a>
<ul>
<li><a href="#hardware-requirements">Hardware Requirements</a></li>
<li><a href="#pre-requisites">Pre-requisites</a></li>
<li><a href="#performance-expectations">Performance Expectations</a></li>
<li><a href="#system-diagram">System Diagram</a></li>
</ul>
</li>
<li><a href="#automated-failover">3 Automated Failover</a>
<ul>
<li><a href="#hardware-requirements-1">Hardware Requirements</a></li>
<li><a href="#pre-requisites-1">Pre-requisites</a></li>
<li><a href="#performance-expectations-1">Performance Expectations</a></li>
<li><a href="#system-diagram-1">System Diagram</a></li>
</ul>
</li>
<li><a href="#enterprise-failover">4 Enterprise Failover</a>
<ul>
<li><a href="#hardware-requirements-2">Hardware Requirements</a></li>
<li><a href="#pre-requisites-2">Pre-requisites</a></li>
<li><a href="#performance-expectations-2">Performance Expectations</a></li>
<li><a href="#system-diagram-2">System Diagram</a></li>
</ul>
</li>
<li><a href="#installation">5 Installation</a></li>
<li><a href="#network">6 Network</a>
<ul>
<li><a href="#requirements">Requirements</a>
<ul>
<li><a href="#ip-scheme">IP Scheme</a></li>
</ul>
</li>
<li><a href="#recommendations">Recommendations</a></li>
</ul>
</li>
<li><a href="#testing-failover">7 Testing Failover</a>
<ul>
<li><a href="#planned-failover">Planned Failover</a></li>
<li><a href="#unplanned-failover">Unplanned Failover</a></li>
</ul>
</li>
<li><a href="#bibliography">8 Bibliography</a></li>
</ul>
<h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>The purpose of this document is to outline the failover options for the
Viewscape system, how to install the servers, and the failover process.
Each option will provide a brief description of how the solution works,
along with pre-requisites and expectations when the system fails.</p>
<p>At the time of producing this guide, there are three options for
failover and for reference purposes will be referred to as &quot;Manual
Failover&quot;, &quot;Automated Failover&quot; and &quot;Enterprise Failover&quot;.</p>
<h1 id="manual-failover"><a class="header" href="#manual-failover">Manual Failover</a></h1>
<p>The Manual Failover solution uses Hyper-V replica to perform virtual
machine migration across multiple nodes, and different sites if
required. In the event of failover, verification of network availability
should be performed to ensure failover is required. Once failed over the
virtual machine should start on the backup server within two minutes.
Once failed over to the backup server, the appropriate checks and
actions should be performed as per this manual.</p>
<h2 id="hardware-requirements"><a class="header" href="#hardware-requirements">Hardware Requirements</a></h2>
<ul>
<li>2x Servers (Must support Virtualization)</li>
</ul>
<h2 id="pre-requisites"><a class="header" href="#pre-requisites">Pre-requisites</a></h2>
<ul>
<li>Hyper-V role</li>
<li>2x Windows Server 2012 Standard Edition or greater</li>
<li>Microsoft SQL Server Standard 2014 or greater</li>
</ul>
<h2 id="performance-expectations"><a class="header" href="#performance-expectations">Performance Expectations</a></h2>
<ul>
<li>Manual failover</li>
<li>Network and Hardware failure supported</li>
<li>Virtual machine failover within two minutes</li>
<li>Manual failback and maintenance required</li>
</ul>
<h2 id="system-diagram"><a class="header" href="#system-diagram">System Diagram</a></h2>
<p><img src="screenshots/FailoverSolutions/image2.png" alt="" /></p>
<p><strong>* Diagram only includes Management/Client network addresses. See
section 6.1.1 for full required IP scheme</strong></p>
<h1 id="automated-failover"><a class="header" href="#automated-failover">Automated Failover</a></h1>
<p>The Automated Failover solution is a high availability option which is
comprised of two servers, each running a locally stored virtual machine
for active directory. The servers are then clustered together using
Microsoft Failover cluster and a third virtual machine for the database
and pro server is stored on the storage server as shared storage.
Because the storage is shared between both servers, the virtual machine
can be moved between physical nodes via planned and unplanned failover.
This method incorporates high availability and offers automated failover
within five minutes</p>
<h2 id="hardware-requirements-1"><a class="header" href="#hardware-requirements-1">Hardware Requirements</a></h2>
<ul>
<li>2x Servers (Must support Virtualization)</li>
<li>1x Storage Server (QNAP) (Must support iSCSI)</li>
</ul>
<h2 id="pre-requisites-1"><a class="header" href="#pre-requisites-1">Pre-requisites</a></h2>
<ul>
<li>Hyper-V role</li>
<li>Failover Cluster role</li>
<li>2x Windows Server 2012 Standard Edition or greater</li>
<li>Microsoft SQL Server Standard 2014 or greater</li>
</ul>
<h2 id="performance-expectations-1"><a class="header" href="#performance-expectations-1">Performance Expectations</a></h2>
<ul>
<li>Automatic failover</li>
<li>Network and Hardware failure supported</li>
<li>Service and database failover within five minutes</li>
</ul>
<h2 id="system-diagram-1"><a class="header" href="#system-diagram-1">System Diagram</a></h2>
<p><img src="screenshots/FailoverSolutions/image3.png" alt="" /></p>
<p><strong>* Diagram only includes Management/Client network addresses. See
section 6.1.1 for full required IP scheme</strong></p>
<h1 id="enterprise-failover"><a class="header" href="#enterprise-failover">Enterprise Failover</a></h1>
<p>The Enterprise Failover solution offers high availability, greater
redundancy, and faster convergence. Instead of using shared storage
between the servers to migrate the virtual machine, each server has a
locally stored virtual machine, which the database and server
application are migrated between. To achieve this, the virtual machines
are clustered together running a Pro Server service role, as well as
Always on Availability Groups for the SQL databases.</p>
<h2 id="hardware-requirements-2"><a class="header" href="#hardware-requirements-2">Hardware Requirements</a></h2>
<ul>
<li>2x Servers (Must support Virtualization)</li>
<li>1x Storage Server (QNAP)</li>
</ul>
<h2 id="pre-requisites-2"><a class="header" href="#pre-requisites-2">Pre-requisites</a></h2>
<ul>
<li>Hyper-V role</li>
<li>Failover Cluster role</li>
<li>2x Windows Server 2012 Standard Edition or greater</li>
<li>2x Microsoft SQL Server Enterprise 2014 or greater</li>
<li>2x Always up server licenses</li>
</ul>
<h2 id="performance-expectations-2"><a class="header" href="#performance-expectations-2">Performance Expectations</a></h2>
<ul>
<li>Automatic failover</li>
<li>Network and Hardware failure supported</li>
<li>Service and database failover within a minute</li>
</ul>
<h2 id="system-diagram-2"><a class="header" href="#system-diagram-2">System Diagram</a></h2>
<p><img src="screenshots/FailoverSolutions/image4.png" alt="" /></p>
<p><strong>* Diagram only includes Management/Client network addresses. See
section 6.1.1 for full required IP scheme</strong></p>
<h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>The physical installation of the servers are identical, the only
difference is software and network configuration, which is carried out
by Veracity. Section 6 Network outlines the requirements and
recommendations prior to configuration. It is advised the following is
carried out during installation;</p>
<ul>
<li>Each server has a power connection from two different UPS sources</li>
<li>Each server has two or more LAN connections (Up to 4) and to separate switches (for example, two connections to Switch 1 and two connections to Switch 2)</li>
<li>Connect the iLO port on Server 1 to Switch 1 and iLO port on Server 2 to Switch 2</li>
</ul>
<p><img src="screenshots/FailoverSolutions/image5.png" alt="" /></p>
<h1 id="network"><a class="header" href="#network">Network</a></h1>
<p>The network considerations are the most important aspect of configuring
the failover system and the following objectives should be considered;</p>
<ul>
<li>To ensure network quality of service</li>
<li>To provide network redundancy</li>
<li>To isolate traffic to defined networks</li>
</ul>
<h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<p>To aim for the objectives above, Veracity utilise VLAN's and NIC Teaming
and a single external virtual switch to ensure redundancy, quality of
service and isolate traffic. To achieve this, the following requirements
must be met;</p>
<ul>
<li>Network must support VLAN's, trunking and if required, inter-VLAN routing (IEEE 802.1q)</li>
<li>All switch ports must operate at 1Gbps and a minimum of two main server ports used</li>
<li>There must be at least two networks used, one for client connections and one for communication between clustered servers</li>
</ul>
<p>The following information must be obtained prior to installation of the
high availability failover solution;</p>
<ul>
<li><strong>Network design</strong> -- An overview of network devices and connections to the servers, including any physical locations</li>
<li><strong>IP scheme</strong> -- Provided based upon the information in 6.1.1 IP Scheme</li>
</ul>
<h3 id="ip-scheme"><a class="header" href="#ip-scheme">IP Scheme</a></h3>
<p>The IP scheme should include network addresses and subnet masks for each
server for the following networks where applicable;</p>
<ul>
<li><strong>Management</strong> - Provides connectivity between the server that is running Hyper-V and basic infrastructure functionality. Used for administrative access and client connections</li>
<li><strong>Cluster</strong> - Used for inter-node cluster communication such as the cluster heartbeat and Cluster Shared Volumes (CSV) redirection</li>
<li><strong>Live migration</strong> - Used for virtual machine live migration</li>
</ul>
<h2 id="recommendations"><a class="header" href="#recommendations">Recommendations</a></h2>
<ul>
<li>Server: Teaming mode -- Switch Independent (Default setting)</li>
<li>Server: Load balancing mode -- Hyper-V Port</li>
<li>QNAP: Port Trunking mode -- Active-Backup</li>
</ul>
<h1 id="testing-failover"><a class="header" href="#testing-failover">Testing Failover</a></h1>
<p>Testing the failover is an essential part of creating a high
availability solution, and this can be done via two methods, planned and
unplanned failover which is listed below. These instructions apply to
automated and enterprise failovers, for manual failover please consult
the manual failover guide.</p>
<h2 id="planned-failover"><a class="header" href="#planned-failover">Planned Failover</a></h2>
<p>Planned Failover is carried out by moving the resource(s) between
clustered nodes. This can be done with the following options;</p>
<ul>
<li>Live migration Move ownership of the clustered virtual machine to
another node without pausing the role</li>
<li>Quick migration Pause the virtual machine, save state, move the role
to another node, and start the virtual machine on the other node.</li>
</ul>
<p>To test a planned failover;</p>
<ol>
<li>In Failover Cluster Manager, select or specify the cluster that you
want. Ensure that the console tree under the cluster is expanded.</li>
<li>To select the destination node for live migration of the clustered
virtual machine, right-click the clustered role (either VS-VPS01
virtual machine if using automated failover, or
VPS-Service/VPS-Availability Group if using enterprise failover).
Point to Move, then Live Migration, and then click Select Node.</li>
</ol>
<p>As the resource is moved, the status is displayed in the results pane
(centre pane). Optionally, you can repeat this step to move the resource
back to the original node.</p>
<ol start="3">
<li>Verify that the move succeeded by inspecting the details of each
node.</li>
</ol>
<h2 id="unplanned-failover"><a class="header" href="#unplanned-failover">Unplanned Failover</a></h2>
<p>Testing unplanned failover can be achieved by simulating a network or
hardware failure. Testing a network failure is carried out by unplugging
all network cables on the server running the clustered roles in Failover
Cluster Manager. Due to some resilience by Microsoft in the virtual
network adapters, it's not possible to simply disable the network
adapters on the server. Failover should then commence shortly after and
the resource verified using Failover Cluster Manager.</p>
<p>Simulating a hardware failure is carried out by the following;</p>
<ol>
<li>In Failover Cluster Manager, select or specify the cluster that you
want. Ensure that the console tree under the cluster is expanded.
Then select Nodes.</li>
<li>Right-click the node that owns the clustered roles (either VS-VPS01
virtual machine if using automated failover, or
VPS-Service/VPS-Availability Group if using enterprise failover).</li>
<li>Point to More Actions, and then click Stop Cluster Service.</li>
</ol>
<p>The clustered roles should then move to the other node. There might be a
short delay while this happens.</p>
<h1 id="bibliography"><a class="header" href="#bibliography">Bibliography</a></h1>
<p>Microsoft. (n.d.). <em>Deploy a Hyper-V Failover Cluster</em>. Retrieved from
https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/jj863389(v%3dws.11)</p>
<p>Microsoft. (n.d.). <em>Failover Clustering in Windows Server</em>. Retrieved
from
https://docs.microsoft.com/en-us/windows-server/failover-clustering/failover-clustering-overview</p>
<p>Microsoft. (n.d.). <em>Network Recommendations for a Hyper-V Cluster in
Windows Server 2012</em>. Retrieved from
https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn550728(v%3dws.11)</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../Integrations/EverRun.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../Integrations/GDPR Manual.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../Integrations/EverRun.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../Integrations/GDPR Manual.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
